var _g_passport_login=null;var _g_passport_login_callback=null;function passport_send_login(){jQuery("#passport_51_user").val(jQuery("#passport_51_user").val().replace(/\s/g,""));var b=jQuery("#passport_51_user").val();var c=jQuery("#passport_51_password").val();c=c.replace(/\+/g,"%2B");c=c.replace(/\&/g,"%26");var a=jQuery("#passport_51_ishidden").attr("checked")?"1":"0";if(b==""){jQuery("#_g_passport_login_msg").html("请输入用户名");jQuery("#passport_51_user").focus();return false}if(c==""){jQuery("#_g_passport_login_msg").html("请输入密码");jQuery("#passport_51_password").focus();return false}jQuery("#_g_passport_login_msg").html("正在登录中，请稍候...");jQuery("#passport_login_submit_btn").attr("disabled","disabled");$.ajax({type:"GET",url:"http://passport.51.com/login.5p",data:"passport_51_jsonp=true&passport_51_user="+b+"&passport_51_password="+c+(jQuery("#passport_51_ishidden").attr("checked")?"&passport_51_ishidden=1":""),cache:false,dataType:"jsonp",success:function(d){jQuery("#passport_login_submit_btn").attr("disabled",false);jQuery("#_g_passport_login_msg").html("&nbsp;");if(d.result==1){_g_passport_login.hide();(typeof _g_passport_login_callback=="function")?_g_passport_login_callback(d.user):location.reload()}else{if(d.result==-1){alert(d.msg);top.location.href=d.url}else{d.msg.replace(/[^\x00-\xFF]/g,"**").length>40?alert(d.msg):jQuery("#_g_passport_login_msg").html(d.msg)}}}});return false}function passport_login(a){if(typeof a!="object"){a=new Object}_g_passport_login_callback=a.success_hook;var c=(typeof a.logo=="string")?a.logo:"";var e=(typeof a.title=="string")?a.title:"51.COM用户登陆";var d=(typeof a.msg=="string")?a.msg:"&nbsp;";if(_g_passport_login==null){_g_passport_login=$_Global_Layer({showMask:true,drag:false,center:true,width:330,height:180,title:c+"&nbsp;"+e})}var b="http://passport.51.com/reg1.5p";if(document.getElementById("passport_popup_reg_from")){b+="?from="+document.getElementById("passport_popup_reg_from").value}_g_passport_login.setContent('<div style="padding-top:6px;text-align:center;color:#F00;line-height:16px;font-size:14px;height:16px;" id="_g_passport_login_msg">'+d+'</div><div style="padding: 0px 10px;"><table class="table_login" cellpadding="0" cellspacing="10" style="border-collapse: separate"><tr><td style="font-size: 14px;" width="50"><label for="passport_51_user">用户名:</label></td><td width="135"><input name="passport_51_user" id="passport_51_user" onkeypress="if(event.keyCode==13) jQuery(\'#passport_login_submit_btn\').click();" maxlength="20" type="text" style="width: 130px; border: 1px solid #b1b1b1;" tabindex="1" /></td><td><a href="'+b+'" target="_blank" tabindex="6">注册新用户</a></td></tr><tr><td style="font-size: 14px;"><label for="passport_51_password">密 码:</label></td><td><input name="passport_51_password" id="passport_51_password" onkeypress="if(event.keyCode==13) jQuery(\'#passport_login_submit_btn\').click();" type="password" style="width: 130px; border: 1px solid #b1b1b1;" tabindex="2" /></td><td><a href="http://my.51.com/auth/passwordreset.php" target="_blank" tabindex="7">忘记密码？</a></td></tr></table><p style="border-top: 1px dashed #ddd; margin-top: 5px; padding-top: 10px; text-align: center;"><input name="passport_51_ishidden" id="passport_51_ishidden" type="checkbox" value="1" tabindex="4" onkeypress="if(event.keyCode==13) jQuery(\'#passport_login_submit_btn\').click();" style="vertical-align:middle;" /><span style="margin: 0 20px 0 3px"><label for="passport_51_ishidden">隐身</label></span><input type="hidden" name="gourl" value="'+location.href+'" /><input type="image" src="http://static.51img1.com/v3/pub/img/login_btn.gif" value="&nbsp;登&nbsp;&nbsp;录&nbsp;" style="vertical-align:middle;" tabindex="5" id="passport_login_submit_btn" /></p></div>');_g_passport_login.show();jQuery("#passport_login_submit_btn").click(function(){passport_send_login()});setTimeout(function(){var g=document.getElementById("passport_51_user");if("passport_51_user"==g.id||!jQuery.browser.msie){g.focus()}else{var f=document.all.passport_51_user;for(var h=f.length;h--;){if(f[h].id=="passport_51_user"){g=f[h];break}}f=null;g.focus()}},100)};