<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>ajax.html</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
	<script type="text/javascript">
		function f1(){
			
			var vlaue = document.getElementById("s1").value;			
			//submit.window.document.getElementById("div").innerHTML = vlaue
			//submit.window.location.href = "servlet/GetCityServlet?par="+encodeURI(encodeURI(vlaue));
			xmlHttpReq = new XMLHttpRequest();
			alert(xmlHttpReq);
			var date = new Date();
			xmlHttpReq.open("GET","servlet/GetCityServlet?par=aaa&xxx="+date);
			xmlHttpReq.onreadystatechange = doHttpReadyStateChange;
			xmlHttpReq.send();			
		}
		function doHttpReadyStateChange(){
			if (xmlHttpReq.readyState == 4) {
      			if(xmlHttpReq.status == 200){
      				var restr = xmlHttpReq.responseText;		
      				var s = restr.split("-");
      				
      				var str = "<select>"
      				for(var i=0;i<s.length;i++){
      					str = str+"<option>"+s[i]+"</option>"
      				
      				}
      				str = str+"</select>"
      				
      				document.getElementById("select2").innerHTML= str;
      			}
   			}
			
		}
	
	
	</script>


  </head>
  
  <body>
    	<select onchange="f1();" id="s1">
    		<option value="四川">四川</option>
    		<option value="湖北">湖北</option>
    		<option value="河南">河南</option>
    	</select>
    <div id="select2">
    	<select>
    		<option>xxxx</option>
    	</select>    
    </div>
    
   
  </body>
</html>
