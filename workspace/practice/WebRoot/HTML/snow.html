<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>snow.html</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  </head>  
  <body>
    	<script type="text/javascript">
    		var no=25;
    		var speed =10;
    		var snowflake ="../images/snow.png";
    		var ns4up = (document.layers)?1:0;
    		var ie4up = (document.all)?1:0;
    		var dx,xp,yp;
    		var am,stx,sty;
    		var i,doc_width=800,doc_height=600;
    		//检查窗口的高度和宽度
    		if(ns4up)
    		{	
    			doc_width =self.innerWidth;
    			doc_height = self.innerHeight;
    		}
    		else
    		{	
    			doc_width =document.body.clientWidth;
    			doc_height =document.body.clientHeight;
    		}
    		dx= new Array();
    		xp= new Array();
    		yp= new Array();
    		am= new Array();
    		stx= new Array();
    		sty= new Array();
    		for(i=0;i<no;++i)
    		{
    			dx[i]=0;
    			xp[i]=Math.random()*(doc_width-50);
    			yp[i]=Math.random()*doc_height;
    			am[i]=Math.random()*20;
    			stx[i]=0.02+Math.random()/10;
    			sty[i]=0.7+Math.random();
    			if(ns4up)
    			{
    				document.write("<layer name=\"dot"+i+"\" left=\"15\" "+"top=\"15\" visibility=\"show\"><img src=\""+snowflake+"\" border=\"0\"></layer>");
    			}
    			else if(ie4up)
    			{
    				document.write("<div id=\"dot"+i+"\" style=\"POSITION:"+"absolute;z-index:"+i+";visibility:"+"visible;top:15px;left:15px;\"><img src=\""+snowflake+"\" border=\"0\"></div>");
    			}
    		}
    		function snowIE(){			//浏览器的下雪处理程序
    			for(i=0;i<no;++i)
    			{
    				yp[i]+=sty[i];
    				if(yp[i]>doc_height-70)
    				{
    					xp[i]=Math.random()*(doc_width-am[i]-50);
    					yp[i]=0;
    					stx[i]=0.02+Math.random()/10;
    					sty[i]=0.7+Math.random();
    					//检查窗体的高度和宽度
    					doc_width=document.body.clientWidth;
    					doc_height=document.body.clientHeight;
    				}
    				dx[i]+=stx[i];
    				//设定“dot”+I层对象的绝对位置
    				document.all["dot"+i].style.pixelTop =yp[i];
    				document.all["dot"+i].style.pixelLeft=xp[i]+am[i]*Math.sin(dx[i]);
    			}
    			setTimeout("snowIE()",speed);
    		}
    			if(ns4up)
    			{
    				snowNS();
    			}
    			else if(ie4up)
    			{
    				snowIE();
    			}
    		
    	</script>
  </body>
</html>
